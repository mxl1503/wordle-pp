# Wordle-PP

Wordle-PP is an enhanced version of the popular word guessing game Wordle, implemented in C++ and compiled to WebAssembly using Emscripten for web browser compatibility.

## Description

This project is a full-stack implementation of Wordle with an added Impossible/Hard mode (detailed later) for an elevated challenge. The backend is written in C++ for optimal performance and compiled into WebAssembly, allowing it to run efficiently in modern web browsers. It also includes a standalone C++ Wordle solver that filters possible solutions from prior guess feedback and recommends a best next guess. The frontend uses React for UI rendering and state management, with CSS for styling.

## Features

- Classic Wordle gameplay with an additional Impossible/Hard mode.
- Backend logic in C++ compiled to WebAssembly for high performance.
- React-based frontend UI.
- Cross-browser compatibility.
- Built-in solver hint system for best next guess recommendations.

## Project Structure

- `cpp-logic/`: Core C++ game engine, WASM exports, and C++ tests.
- `cpp-solver/`: Standalone C++ solver module (candidate filtering + best next guess recommendation).
- `frontend/`: Browser app entry (`index.html`), React game logic (`game.js`), styles (`styles.css`), icons, and generated WASM bundle.
- `cpp-logic/data/wordlists/`: Answer/guess dictionaries and generated wordlist assets.
- `cpp-logic/data/data-utils/`: Utility scripts used to generate/sort wordlist data.

```text
wordle-pp/
|-- cpp-logic/
|   |-- include/wordle/
|   |   `-- engine.hpp
|   |-- src/
|   |   |-- engine.cpp
|   |   `-- wasm_exports.cpp
|   |-- tests/
|   |   |-- CMakeLists.txt
|   |   `-- engine_test.cpp
|   |-- data/wordlists/
|   |   |-- answerList.txt
|   |   |-- guessList.txt
|   |   |-- unsortedWordleAnswers.txt
|   |   `-- stringPermutations.txt
|   `-- data/data-utils/
|       `-- wordlist_tool.py
|-- cpp-solver/
|   |-- include/wordle/
|   |   `-- solver.hpp
|   `-- src/
|       `-- solver.cpp
|-- frontend/
|   |-- index.html
|   |-- styles.css
|   |-- game.js
|   |-- icons/
|   |-- wordle.js
|   |-- wordle.wasm
|   `-- wordle.data
|-- Makefile
|-- CMakeLists.txt
|-- Dockerfile.build
|-- Dockerfile.test
|-- docker-compose.yml
|-- .github/workflows/ci.yml
`-- README.md
```

## Getting Started

### Dependencies

- Docker (required)

### Build with Docker

Compile `cpp-logic/src/wasm_exports.cpp`, `cpp-logic/src/engine.cpp`, and `cpp-solver/src/solver.cpp` to `frontend/wordle.js`, `frontend/wordle.wasm`, and `frontend/wordle.data`:

```sh
make build
```

### Frontend Architecture

- `frontend/wordle.js` (generated by Emscripten) exposes the `Module` object and compiled exports.
- `frontend/game.js` is a React app that calls Emscripten exports (`_createNewGame`, `_makeGuess`, `_validateGuess`, `_makeHardModeGuess`, `_recommendNextGuess`, memory helpers).
- `frontend/index.html` loads `wordle.js`, React/ReactDOM, and then mounts the React app.
- `frontend/styles.css` continues to style the board, keyboard, and popups.

This keeps the Emscripten integration boundary stable while allowing frontend refactors in React.

### Solver Hint Behavior

- The frontend hint button calls the `_recommendNextGuess` WASM export.
- On the backend, the solver filters valid candidates and recommends a next guess.

### Serve Locally with Docker

Start a static web server on port `8080`:

```sh
make serve
```

Then open:

- [http://localhost:8080](http://localhost:8080)

### Clean Build Artifacts

```sh
make clean
```

## Manual compile command (reference)

```sh
em++ -std=c++17 -O3 -Icpp-logic/include -Icpp-solver/include --preload-file cpp-logic/data/wordlists/answerList.txt --preload-file cpp-logic/data/wordlists/guessList.txt cpp-logic/src/wasm_exports.cpp cpp-logic/src/engine.cpp cpp-solver/src/solver.cpp -o frontend/wordle.js -s WASM=1 \
-s EXPORTED_FUNCTIONS='["_createNewGame", "_makeGuess", "_validateGuess", "_makeHardModeGuess", "_recommendNextGuess", "_freeCString", "_free", "_malloc"]' \
-s EXPORTED_RUNTIME_METHODS='["ccall", "cwrap", "UTF8ToString", "stringToUTF8", "setValue"]'
```

### Run C++ Unit Tests (GoogleTest)

```sh
make test-cpp
```

If CMake cannot find GTest, install it and re-run `make test-cpp`.

Run the same C++ tests in Docker (no host GTest required):

```sh
make test-cpp-docker
```

### Wordlist Utilities

Wordlist utility CLI docs are in:

- [`cpp-logic/data/data-utils/README.md`](./cpp-logic/data/data-utils/README.md)

## Impossible/Hard Mode

Impossible/Hard mode makes Wordle adversarial:

- The game does not lock in one target word at the start.
- After each guess, it keeps every answer still consistent with your past feedback.
- For your current guess, it returns the feedback pattern that leaves the largest remaining answer set.
- This means you get the least helpful valid feedback each turn, so solving is harder.

Core implementation lives in `makeHardModeGuess`, using `FilterAnswerList` and `FindWorstFeedback`.

## Acknowledgements

Project inspired by the following sources:
- **Wordle** (https://www.nytimes.com/games/wordle/index.html)
- **Solving Wordle using information theory** by 3B1B (https://www.youtube.com/watch?v=v68zYyaEmEA)
- **Optimal Wordle Solutions** by Jonathon Olsen (https://jonathanolson.net/experiments/optimal-wordle-solutions)
- **Wordle-solving state of the art: all optimality results so far** by Laurent Poirrier (https://www.poirrier.ca/notes/wordle-optimal/)
